<script>
    function submitOnEnter(event) {
        if (event.which === 13 && !event.shiftKey) {
            if (!event.repeat) {
                //const newEvent = new Event("submit", {cancelable: true});
                //event.target.form.dispatchEvent(newEvent);
                event.target.form.requestSubmit()
            }

            event.preventDefault(); // Prevents the addition of a new line in the text field
        }
    }
    {% if conversation %}
        document.getElementById("query").addEventListener("keydown", submitOnEnter);

        //scroll to bottom of chat window
        document.getElementById('chat-container').scrollIntoView({behavior: 'smooth', block: 'end'});
    {% endif %}
</script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>